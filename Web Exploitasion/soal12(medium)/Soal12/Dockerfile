FROM php:8.1-apache

# Install mysqli extension dan mysql-client (supaya ada mysqladmin)
RUN apt-get update && \
    apt-get install -y default-mysql-client && \
    docker-php-ext-install mysqli

# Tambahkan skrip wait-for-mysql
COPY wait-for-mysql.sh /wait-for-mysql.sh
RUN chmod +x /wait-for-mysql.sh

# Copy semua file project ke /var/www/html
COPY . /var/www/html/
RUN chown -R www-data:www-data /var/www/html
